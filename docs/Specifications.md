# وثيقة توصيف واجهة المستخدم (UI Layout Specification)

هذه الوثيقة تقدم توصيفًا هيكليًا ووظيفيًا متكاملًا لتصميم واجهة المستخدم الخاصة بالمشروع، مع التركيز على التصميم من اليمين إلى اليسار (RTL) لدعم اللغة العربية وضمان تجربة مستخدم سلسة وفعالة.

## 1. الهيكل العام للواجهة (General UI Structure)

تعتمد الواجهة على تخطيط موحد يضمن الاتساق عبر جميع صفحات المشروع. العناصر الأساسية موزعة بوضوح وتدعم اتجاه RTL بشكل كامل:

*   **الرأس (`BrandingHeader.jsx` / `FixedNavigationBar.jsx`):** يقع في الجزء العلوي من الصفحة. يحتوي على شعار الشركة، عنوان التطبيق، وأحيانًا عناصر تنقل رئيسية أو معلومات المستخدم. في وضع RTL، يتم محاذاة الشعار إلى اليمين وتتبعه العناصر الأخرى نحو اليسار. يتم ضمان ثباته واستجابته لجميع أحجام الشاشات.
*   **القائمة الجانبية (Sidebar / Navigation):** إذا كانت موجودة، فستظهر على الجانب الأيمن افتراضيًا في وضع RTL. تحتوي على روابط تنقل رئيسية بين صفحات المشروع. يجب أن تكون عناصر القائمة محاذية لليمين.
*   **المحتوى الرئيسي (`UnifiedPageLayout.jsx`):** هو المنطقة الديناميكية التي تعرض محتوى كل صفحة. يتم تغليف معظم محتوى الصفحات داخل مكون `UnifiedPageLayout` الذي يوفر عنوان الصفحة، وصفها، ويحتوي على المكونات الخاصة بالصفحة مثل الجداول والمرشحات والمخططات. يتم تنظيم المحتوى داخل هذه المنطقة لدعم RTL، حيث تبدأ القراءة والتخطيط من اليمين إلى اليسار.
*   **التذييل (Footer):** يقع في الجزء السفلي من الصفحة. يحتوي على معلومات حقوق النشر، روابط مساعدة، أو معلومات اتصال. عادة ما يكون محاذيًا لليمين أو يتبع تخطيطًا مرنًا يدعم RTL.

**اعتبارات RTL في الهيكل العام:**
   - يتم تحديد اتجاه `dir="rtl"` على مستوى التطبيق (عادة عبر `ThemeProvider` أو `ConfigProvider` لـ Ant Design) لضمان تطبيق شامل.
   - يتم عكس ترتيب العناصر الأفقية تلقائيًا أو يدويًا ليتناسب مع RTL (مثال: الأزرار، أيقونات التنقل).

## 2. وصف العناصر التفاعلية (Description of Interactive Elements)

جميع العناصر التفاعلية مصممة لتكون بديهية ومتوافقة مع RTL، وتدعم حالات التفاعل المختلفة:

*   **الأزرار (`UnifiedButton.jsx`):**
    *   **الوظيفة:** تنفيذ إجراءات معينة (مثال: "استيراد ملف Excel"، "تصفية"، "تصدير").
    *   **الحالات:**
        *   **عادي:** المظهر الافتراضي للزر.
        *   **تحويم (Hover):** تغيير طفيف في الخلفية أو الحدود عند مرور المؤشر فوقه.
        *   **نشط (Active):** مظهر مميز عند الضغط عليه.
        *   **معطل (Disabled):** مظهر باهت وغير قابل للتفاعل.
    *   **اعتبارات RTL:** يتم محاذاة النصوص والرموز داخل الزر بشكل صحيح مع اتجاه النص العربي.

*   **حقول الإدخال (Input Fields):**
    *   **الوظيفة:** استقبال مدخلات المستخدم (مثال: نصوص، أرقام، تواريخ).
    *   **الحالات:**
        *   **عادي:** حقل فارغ أو يحتوي على قيمة.
        *   **تركيز (Focus):** إبراز الحقل بحدود ملونة أو ظل عند التفاعل معه.
        *   **خطأ (Error):** حدود حمراء أو رسالة خطأ أسفل الحقل عند إدخال غير صالح.
        *   **معطل (Disabled):** مظهر باهت وغير قابل للتعديل.
    *   **اعتبارات RTL:** يبدأ مؤشر الكتابة من اليمين، وتتم محاذاة النص المدخل إلى اليمين. تظهر التسميات التوضيحية (labels) على يمين الحقل.

*   **القوائم المنسدلة (`Select`):**
    *   **الوظيفة:** اختيار قيمة واحدة أو أكثر من قائمة محددة مسبقًا (مثال: اختيار المورد).
    *   **الحالات:** مشابهة لحقول الإدخال.
    *   **اعتبارات RTL:** تفتح القائمة المنسدلة باتجاه اليمين، وتتم محاذاة عناصر القائمة لليمين.

*   **الروابط (Links):**
    *   **الوظيفة:** الانتقال إلى صفحة أخرى أو جزء آخر من نفس الصفحة.
    *   **الحالات:** عادي، تحويم، نشط، تم زيارته.
    *   **اعتبارات RTL:** يتم تضمينها في سياق النص العربي، مع الحفاظ على اتجاه القراءة.

*   **علامات التبويب (`NavigationTabs.jsx`):**
    *   **الوظيفة:** التبديل بين أقسام المحتوى المختلفة داخل نفس الصفحة.
    *   **اعتبارات RTL:** يتم ترتيب علامات التبويب من اليمين إلى اليسار، بحيث تكون علامة التبويب النشطة على اليمين وتتبعها الأخرى نحو اليسار.

*   **الجداول (`UnifiedTable.jsx`):**
    *   **الوظيفة:** عرض البيانات المنظمة في صفوف وأعمدة.
    *   **اعتبارات RTL:**
        *   **ترتيب الأعمدة:** يتم عرض الأعمدة من اليمين إلى اليسار.
        *   **محاذاة المحتوى:** تتم محاذاة النصوص في الأعمدة إلى اليمين بشكل افتراضي، بينما يتم محاذاة الأرقام إلى اليمين لسهولة القراءة.
        *   **تثبيت الأعمدة:** الأعمدة المثبتة (`fixed: 'left'`) ستظهر على الجانب الأيمن من الجدول في وضع RTL.
        *   **الملخصات:** تظهر ملخصات الصفوف في أسفل الجدول، ويتم محاذاة النصوص والأرقام فيها بشكل صحيح لـ RTL.
        *   **عناصر التحكم:** تظهر عناصر التحكم بالفرز والترقيم داخل الجدول بشكل يدعم RTL.

## 3. تنظيم المحتوى (Content Organization)

يتم تنظيم المحتوى مع مراعاة اتجاه RTL لضمان تدفق طبيعي للمعلومات:

*   **التدفق من اليمين إلى اليسار:** يبدأ المحتوى الرئيسي دائمًا من اليمين ويتدفق نحو اليسار.
*   **محاذاة النصوص:** جميع النصوص في الواجهة (العناوين، الفقرات، تسميات الحقول) محاذاة لليمين افتراضيًا.
*   **ترتيب العناصر:** يتم ترتيب العناصر المتجاورة (مثل الأزرار المتعددة، البطاقات، العناصر داخل شبكة) من اليمين إلى اليسار.
*   **التباعد:** يتم استخدام تباعد مناسب بين العناصر لضمان الوضوح وسهولة القراءة، مع مراعاة الهوامش الداخلية والخارجية التي تتكيف مع اتجاه RTL.
*   **الصور والرسوم البيانية:** يتم وضع الصور والرسوم البيانية ضمن سياق المحتوى العربي. في حالة الرسوم البيانية، يجب أن يتم عكس المحاور أو تدفق البيانات ليعكس اتجاه RTL إن أمكن (مثال: أشرطة المخططات الشريطية تنمو من اليمين).

## 4. المعايير البصرية (Visual Standards)

تتبع الواجهة معايير بصرية محددة لضمان هوية مرئية متسقة وجذابة، مع مراعاة إمكانية الوصول:

*   **الألوان:** يتم استخدام لوحة ألوان محددة تعكس هوية المشروع وتضمن تباينًا كافيًا لسهولة القراءة، خاصةً بين النص والخلفية.
*   **الخطوط:** يتم اختيار خطوط عربية واضحة ومناسبة للقراءة الرقمية.
*   **الأحجام:** يتم تحديد أحجام الخطوط والعناصر لضمان الوضوح والراحة على مختلف الأجهزة والشاشات.
*   **الرموز (Icons):** يتم استخدام أيقونات Ant Design بشكل أساسي. يتم التأكد من أن الأيقونات ذات الاتجاه (مثل أيقونات الأسهم) يتم عكسها تلقائيًا في وضع RTL.
*   **التباين (Contrast):** يتم الالتزام بمعايير تباين الألوان لضمان إمكانية الوصول لذوي الاحتياجات الخاصة.

## 5. التوافقية والاستجابة (Compatibility and Responsiveness)

الواجهة مصممة لتكون متوافقة مع متصفحات الويب الحديثة ومستجيبة لمختلف أحجام الشاشات والأجهزة:

*   **التصميم المستجيب (Responsive Design):** يتم تعديل تخطيط الواجهة تلقائيًا ليناسب أحجام الشاشات المختلفة (الهواتف الذكية، الأجهزة اللوحية، أجهزة الكمبيوتر المكتبية).
*   **دعم RTL الشامل:** يتم ضمان دعم RTL الكامل في جميع نقاط التوقف (breakpoints) للشاشات. يتم تطبيق قواعد RTL ديناميكيًا على جميع العناصر التي تتطلب ذلك.
*   **المرونة (Flexibility):** استخدام أنظمة الشبكة المرنة (مثل `Row` و `Col` من Ant Design) التي تدعم RTL بشكل طبيعي وتتكيف مع تغييرات حجم الشاشة.

## 6. وصف سلوك الواجهة (Description of Interface Behavior)

تتفاعل الواجهة مع المستخدم بطريقة متوقعة وبديهية عبر السيناريوهات المختلفة:

*   **تحميل البيانات:**
    *   عند تحميل البيانات (خاصة في الصفحات التي تتطلب معالجة ملفات Excel)، تظهر مؤشرات تحميل واضحة (`LoadingFallback.jsx`, `ProgressIndicator.jsx`) لإعلام المستخدم بالعملية الجارية.
    *   يتم عرض رسائل تنبيه (`UnifiedAlert.jsx`) في حالات عدم توفر البيانات أو الأخطاء أو التحذيرات المتعلقة بالبيانات المستوردة.
*   **التصفية والفرز والترقيم:**
    *   تسمح عناصر التحكم في `UnifiedFilterBar` للمستخدمين بتضييق نطاق البيانات المعروضة.
    *   يمكن للمستخدمين فرز البيانات في الجداول بالنقر على رؤوس الأعمدة.
    *   توفر أدوات ترقيم الصفحات (الموجودة في `UnifiedTable`) التنقل السهل عبر مجموعات البيانات الكبيرة.
*   **اختيار المورد (في صفحة حركة المورد):**
    *   يؤدي تحديد مورد من القائمة المنسدلة إلى تحديث ديناميكي للملخصات والجداول المتعلقة بهذا المورد.
*   **القسم القابل للطي (`CollapsibleSection.jsx`):**
    *   يمكن للمستخدمين طي أو توسيع أقسام المحتوى لتحسين التركيز وإدارة المساحة على الشاشة.
*   **إثراء البيانات (Data Enrichment):**
    *   في صفحات مثل "تجهيز المرتجعات"، يتم إثراء البيانات الأولية بمعلومات إضافية (مثل مبيعات الصنف، عمر الصنف) لتحسين سياق التقرير.

**ضمان الامتثال لـ RTL:**
   - يتم التأكيد على أن جميع المكونات المعيارية (مثل Ant Design components) يتم تهيئتها بشكل صحيح لـ RTL من خلال `ConfigProvider` لضمان عكس الاتجاه تلقائيًا للعناصر التي تحتاج لذلك (مثل أيقونات الأسهم في الترقيم، اتجاه الأشرطة في المخططات).
   - يتم التحقق من صحة محاذاة النصوص وترتيب العناصر وتدفق المحتوى بصريًا في وضع RTL لضمان عدم وجود أي تعارضات غير متوقعة.

هذه الوثيقة الشاملة توفر إطارًا واضحًا لتصميم وتطوير واجهة المستخدم، مع التركيز على تلبية المتطلبات الوظيفية والجمالية مع الالتزام الصارم بمعايير RTL لتوفير تجربة مستخدم مثالية للجمهور العربي.