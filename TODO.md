# خطة تنفيذية لإصلاح وتحديث المشروع

## أولويات عالية (يجب تنفيذها فوراً)

### 1. إصلاح خوارزميات المطابقة في المشتريات والمبيعات
- [x] تحديث خوارزمية صافي المشتريات لتطبيق المفاتيح الثمانية المحددة
- [x] تحديث خوارزمية صافي المبيعات لتطبيق المفاتيح العشرة المحددة
- [x] تطبيق شروط التاريخ بشكل صحيح (تاريخ المرتجع >= تاريخ الشراء/البيع)

### 2. إكمال تقرير الجرد الدفتري
- [x] إنشاء منطق الجرد الدفتري (Book Inventory Logic)
- [x] تطوير واجهة المستخدم لتقرير الجرد الدفتري
- [x] ربط التقرير بالبيانات المطلوبة

### 3. إكمال تقرير حركة المورد
- [x] إكمال القسم الأول: الإجماليات
- [x] إكمال القسم الثاني: تفاصيل الأصناف
- [x] إكمال القسم الثالث: تفاصيل الأصناف المعدة للإرجاع

## أولويات متوسطة (يجب تنفيذها قريباً)

### 4. تحسين معالجة الجرد الفعلي
- [x] تنفيذ خطوة "نقل الكميات المنتهية للصلاحية الأقرب"
- [x] تنفيذ خطوة "حذف السجلات المتطابقة"
- [x] تطبيق الفرز المخصص كما هو محدد

### 5. تحسين حسابات استحقاق الموردين
- [x] حساب "قيمة المخزون الراكد" بدقة
- [x] تمييز بين "المخزون المنتهي" و"المخزون القريب جداً"
- [x] حساب "قيمة الاحتياج (3 أشهر)" بشكل صحيح

### 6. تحسين حساب تكلفة المبيعات
- [x] تطبيق المفاتيح الأربعة للمطابقة بشكل صحيح
- [x] تطبيق شرط "تاريخ صافي المبيعات >= تاريخ صافي المشتريات"
- [x] معالجة الحالات الجزئية بشكل صحيح

## أولويات منخفضة (يمكن تنفيذها لاحقاً)

### 7. تحسين واجهة المستخدم
- [x] إضافة شريط بحث فوق كل جدول
- [x] تنفيذ مؤشر التقدم عند العمليات الثقيلة
- [x] إضافة زر طباعة مع معاينة طباعة احترافية
- [x] تنفيذ وظائف التصدير المطلوبة

### 8. تحسين الأداء والاختبارات
- [ ] إنشاء اختبارات وحدة لكل وحدة منطقية
- [ ] تطوير اختبارات تكامل لسلسلة كاملة من العمليات
- [ ] تنفيذ اختبارات أداء مع بيانات ضخمة
- [ ] إنشاء اختبارات واجهة للتحقق من الوظائف المختلفة

### 9. تحسين جودة الكود والتوثيق
- [x] إضافة تعليقات عربية شاملة في الكود
- [x] تطبيق فصل واضح بين UI، المنطق، والبيانات
- [x] اتباع نمط تصميم منظم (مثل MVC)
- [x] تنفيذ بنية معيارية تدعم التوسع
- [x] تحسين الأمان مع تنفيذ سياسة أمان صارمة (Content Security Policy)

### 10. مهام إضافية
- [ ] إنشاء اختبارات تلقائية للوظائف المحدثة
- [ ] تحسين أداء التطبيق مع مجموعات بيانات كبيرة
- [ ] إضافة دعم للغات المتعددة

## متابعة وتنفيذ

سيتم تنفيذ هذه الخطة تدريجياً مع إعطاء الأولوية للعناصر التي تؤثر على دقة النتائج المحاسبية أولاً، ثم تحسين واجهة المستخدم والوظائف الإضافية.